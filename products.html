<! DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products - E-Commerce Store</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="container">
                <div class="logo">
                    <h1>ShopHub</h1>
                </div>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="products. html" class="active">Products</a></li>
                    <li><a href="cart.html">Cart (<span id="cart-count">0</span>)</a></li>
                    <li><a href="checkout.html">Checkout</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main>
        <section class="products-section">
            <div class="container">
                <h2>Our Products</h2>
                
                <div class="filters">
                    <input type="text" id="search-input" placeholder="Search products..." />
                    <select id="sort-select">
                        <option value="">Sort By</option>
                        <option value="price-low">Price:  Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="name">Name: A-Z</option>
                    </select>
                </div>

                <div class="product-grid" id="products-container">
                    <!-- Products will be loaded here -->
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 ShopHub. All rights reserved.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        let allProducts = [];

        document.addEventListener('DOMContentLoaded', () => {
            loadProducts();
            updateCartCount();
            
            document.getElementById('search-input').addEventListener('input', filterProducts);
            document.getElementById('sort-select').addEventListener('change', sortProducts);
        });

        async function loadProducts() {
            try {
                allProducts = await fetchProducts();
                displayProducts(allProducts, 'products-container');
            } catch (error) {
                console. error('Error loading products:', error);
                document.getElementById('products-container').innerHTML = 
                    '<p class="error">Failed to load products.  Please try again later.</p>';
            }
        }

        function filterProducts() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const filtered = allProducts.filter(product => 
                product.name.toLowerCase().includes(searchTerm) ||
                product.description.toLowerCase().includes(searchTerm)
            );
            displayProducts(filtered, 'products-container');
        }

        function sortProducts() {
            const sortValue = document.getElementById('sort-select').value;
            let sorted = [...allProducts];
            
            switch(sortValue) {
                case 'price-low':
                    sorted.sort((a, b) => a.price - b.price);
                    break;
                case 'price-high': 
                    sorted.sort((a, b) => b.price - a.price);
                    break;
                case 'name': 
                    sorted.sort((a, b) => a.name.localeCompare(b.name));
                    break;
            }
            
            displayProducts(sorted, 'products-container');
        }
    </script>
</body>
</html>